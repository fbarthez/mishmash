<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=utf-8 />
    <title>!important</title>
    <script src=http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js></script>
    <script src=important.js></script>
    

<!-- document-level !important rules for #elem -->
<style id=style>
#elem {
    background-color:#333 !important;
    color:white !important;
}
</style>
<!-- end document-level !important rules for #elem -->
    
    
    
    <!-- general styling for demo -->
    <style>
        body {
            padding:0;
            margin:0;
        }
    
        #elem {            
            border:1em solid #ccc;
            overflow:auto;
            width:100%;
            padding:1.62%;
        }
        
        #style-csstext, #elem-attr {
            background-color:#c33;
            color:#ffc;
        }
    </style>
</head>

<body>
    <h1>!important</h1>
    
    <div id=controls>
        <button id=cmd-toImportant>
            $(elem).important();
        </button>
        
        <button id=cmd-notImportant>
            $(elem).important(false);
        </button>
        
        <button id=cmd-noConflict>
            $.important.noConflict();
        </button>
        
        <button id=cmd-makeImportant>
            $(elem).important('background-color');
        </button>
        
        <button id=cmd-makeNotImportant>
            $(elem).important('background-color', false);
        </button>
        
        <button id=cmd-addStyle>
            $(elem).css({'background-color':'blue', color:'yellow'}, true);
        </button>
        
        <button id=cmd-addStyle2>
            $(elem).important({'background-color':'black', color:'green'});
        </button>
        
        <button id=cmd-styleToImportant>
            $(style).important();
        </button>
        
        <button id=cmd-styleToNotImportant>
            $(style).important(false);
        </button>
    </div>

<!-- #elem -->
<div id=elem style="
    background-color:blue;
    color:yellow;
">
<pre><code id=style-outer>
&lt;style id=style&gt;<code id=style-csstext></code>&lt;/style&gt;
</code></pre>
<pre><code id=elem-outer>
&lt;div id=elem style=&quot;
<code id=elem-attr></code>
&quot;&gt;&lt;/div&gt;
</code></pre>
</div>
<!-- end #elem -->

    
    <!--
        <strong>Style element:</strong> <code id=style-inner></code>
        <br>
        <strong>Current style:</strong> <code id=current-style></code>
    
        <p>This is an element with id <code>elem</code>.</p>
        <p>The containing document has an inline style element with id <code>style</code>.</p>
        <p>
            <pre><code>
$('#elem').important(); // adds the !important statement to all of this element's inline styles

$('#elem').important(false); // removes the !important statement from all of this element's inline styles

$('#elem').important({padding:'1em'}) ===
    $('#elem').css({padding:'1em'}); // add an inline style, using the !important statement. This will override any existing CSS properties of this type.

// TO BE IMPLEMENTED
$('#elem').important('width', '1.62em') ===
    $('#elem').width('1.62em', true); // do $('#elem').width('1.62em') using the !important statement

// and similar, for other native jQuery methods:
$('#elem').important('height');
$('#elem').important('show');
$('#elem').important('hide');
$('#elem').important('animate');

$('#elem').important('padding'); // make this one inline style property !important

$('#elem').important('padding', false); // make this one inline style property not !important

//  !important === sudo
            </code></pre>
        </p>
    -->
    
    <script>
        // TESTS
        var
            elem = $('#elem'),
            elemReport = $('#elem-attr'),
            style = $('#style'),
            styleReport = $('#style-csstext'),
            update = (function(){
                return function(){
                    elemReport
                        .text('    ' + elem.attr('style').replace(/;\s*/, ';\n    '));
                    styleReport
                        .text(style.html());
                }
            }());
        
        update();
        
        
        $('#cmd-toImportant')
            .click(function(){
                elem.important();
                update();
            });
        
        $('#cmd-notImportant')
            .click(function(){
                elem.important(false);
                update();
            });
        
        $('#cmd-noConflict')
            .click(function(){
                $.noConflict();
                update();
            });
        
        $('#cmd-makeImportant')
            .click(function(){
                elem.important('background-color');
                update();
            });
        
        $('#cmd-makeNotImportant')
            .click(function(){
                elem.important('background-color', false);
                update();
            });
        
        $('#cmd-addStyle')
            .click(function(){
                $(elem).css({'background-color':'blue', color:'yellow'}, true);
                update();
            });
        
        $('#cmd-addStyle2')
            .click(function(){
                $(elem).important({'background-color':'black', color:'green'});
                update();
            });
        
        $('#cmd-styleToImportant')
            .click(function(){
                $(style).important();
                update();
            });
        
        $('#cmd-styleToNotImportant2')
            .click(function(){
                $(style).important(false);
                update();
            });
    </script>
</body>
</html>
